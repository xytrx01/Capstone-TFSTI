@model IEnumerable<Capstone_TFSTI.Models.Employee>

@{
    ViewBag.Title = "Users";
    Layout = "~/Views/AdminLayout.cshtml";

}

<h2>Users</h2>

<div class="main-content">
    <header>
        <h2>
            <label for="nav-toggle">
                <span class="las la-bars"></span>
            </label>
            Employee
        </h2>
    </header>
    <main>

        <div class="upper-section">
            <div class="search-wrapper">
                <span class="las la-search"></span>
                <input type="text" placeholder="Search here">
            </div>
        </div>

        <div class="user-grid">
            <div class="user-header">
                <h3>EMPLOYEE LIST</h3>
                <div class="user-buttons-style">
                    <button class="add-btn" title="ADD NEW ITEM"><a href="@Url.Action("AddUsers","Admin")"><label>Add User</label></a></button>
                    &nbsp;
                    <button class="user-filter-btn" onclick="userFiltFunction()">
                        <a>
                            <span>Filter</span>
                            <span class="las la-chevron-down"></span>
                        </a>
                    </button>
                    <div class="user-filter-content" id="userFiltDropdown">
                        <a href="#">Office Manager</a>
                        <a href="#">Warehouse Manager</a>
                        <a href="#">Supervisor</a>
                    </div>
                    &nbsp;
                    <button class="user-sort-btn" onclick="userSortFunction()">
                        <a>
                            <span>Sort</span>
                            <span class="las la-chevron-down"></span>
                        </a>
                    </button>
                    <div class="user-sort-content" id="userSortDropdown">
                        <a href="#">Ascending</a>
                        <a href="#">Descending</a>
                    </div>
                </div>
            </div>
            <div class="user-projects">
                <div class="users">
                    <div class="user-body">
                        <div class="table-responsive" style="overflow-x: auto;">
                            <table class="table" width="100%">
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(model => model.emp_name)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.emp_hiredDate)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.emp_contact)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.emp_position)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Credential.username)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Role.emp_no)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Status.emp_no)
                                    </th>
                                    <th>Action</th>
                                </tr>

                                @foreach (var item in Model)
                                {
                                    <tbody>
                                        <tr>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.emp_name)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.emp_hiredDate)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.emp_contact)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.emp_position)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Credential.username)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Role.emp_no)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Status.emp_no)
                                            </td>
                                            <td>
                                                <div class="user-action-style">
                                                    <button class="edit-btn" title="EDIT SELECTED ITEM" onclick="openEditForm()"> <a href="#"><span class="lar la-edit"></span></a></button>
                                                    <button class="del-btn" title="DELETE SELECTED ITEM" onclick="canOpenPopup()"> <a href="#"><span class="lar la-trash-alt"></span></a></button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>

<div class="can-pop-container" id="can-popup">
    <img src="~/Content/images/warning.png">
    <h2>System Warning!</h2>
    <p>Do you want to remove the user on the list?</p>
    <button type="button" onclick="remOpenPopup() + canClosePopup()">Yes</button>
    <button type="button" onclick="canClosePopup()">Cancel</button>
</div>

<div class="rem-pop-container" id="rem-popup">
    <img src="~/Content/images/remove.png">
    <h2>Deleted!</h2>
    <p>User removed in the list successfully!</p>
    <button type="button" onclick="remClosePopup()">OK</button>
</div>
</main>
<script>


    function userFiltFunction() {
        document.getElementById("userFiltDropdown").classList.toggle("user-filter-show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function (e) {
        if (!e.target.matches('.user-filter-btn')) {
            var myDropdown = document.getElementById("userFiltDropdown");
            if (myDropdown.classList.contains('user-filter-show')) {
                myDropdown.classList.remove('user-filter-show');
            }
        }
    }

    function userSortFunction() {
        document.getElementById("userSortDropdown").classList.toggle("user-sort-show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function (e) {
        if (!e.target.matches('.user-sort-btn')) {
            var myDropdown = document.getElementById("userSortDropdown");
            if (myDropdown.classList.contains('user-sort-show')) {
                myDropdown.classList.remove('user-sort-show');
            }
        }
    }

    let canpopup = document.getElementById("can-popup");

    function canOpenPopup() {
        canpopup.classList.add("can-popup-show")
    }

    function canClosePopup() {
        canpopup.classList.remove("can-popup-show")
    }

    let rempopup = document.getElementById("rem-popup");

    function remOpenPopup() {
        rempopup.classList.add("rem-popup-show")
    }

    function remClosePopup() {
        rempopup.classList.remove("rem-popup-show")
    }

</script>